// Combination Sum II
// You are given an array of integers candidates, which may contain duplicates, and a target integer target. Your task is to return a list of all unique combinations of candidates where the chosen numbers sum to target.

// Each element from candidates may be chosen at most once within a combination. The solution set must not contain duplicate combinations.

// You may return the combinations in any order and the order of the numbers in each combination can be in any order.

// Example 1:

// Input: candidates = [9,2,2,4,6,1,5], target = 8

// Output: [
//   [1,2,5],
//   [2,2,4],
//   [2,6]
// ]
// Example 2:

// Input: candidates = [1,2,3,4,5], target = 7

// Output: [
//   [1,2,4],
//   [2,5],
//   [3,4]
// ]
class Solution {
    /**
     * @param {number[]} candidates
     * @param {number} target
     * @return {number[][]}
     */
    combinationSum2(candidates, target) {
        const result = [];
        candidates.sort((a, b) => a - b); // âœ… Sort to handle duplicates easily

        function backtrack(start, current, total) {
            // âœ… Found a valid combination
            if (total === target) {
                result.push([...current]);
                return;
            }

            // ğŸš« Exceeded the target
            if (total > target) return;

            for (let i = start; i < candidates.length; i++) {
                // ğŸ§¹ Skip duplicates
                if (i > start && candidates[i] === candidates[i - 1]) continue;

                current.push(candidates[i]);
                backtrack(i + 1, current, total + candidates[i]); // move to next (no reuse)
                current.pop(); // backtrack
            }
        }

        backtrack(0, [], 0);
        return result;
    }
}
